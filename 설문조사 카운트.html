<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„¤ë¬¸ í†µê³„ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì¹´ìš´í„°</title>
    <style>
        /* ğŸ¨ CSS ìŠ¤íƒ€ì¼ (ì´ì „ê³¼ ë™ì¼) */
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 30px;
            background-color: #f4f4f9;
        }

        h1 {
            color: #333;
            margin-bottom: 5px;
        }

        #instructions {
            margin-bottom: 20px;
            padding: 10px;
            background-color: #e0f7fa;
            border-left: 5px solid #00bcd4;
            font-weight: bold;
            max-width: 1000px;
        }

        /* í•­ëª© ê´€ë¦¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #control-panel {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        #add-option-btn {
            background-color: #28a745;
            color: white;
        }
        #add-option-btn:hover { background-color: #1e7e34; }

        #reset-count-btn {
            background-color: #dc3545;
            color: white;
        }
        #reset-count-btn:hover { background-color: #c82333; }

        /* ì¹´ìš´í„° ê·¸ë¦¬ë“œ ìŠ¤íƒ€ì¼ */
        #counter-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            width: 90%;
            max-width: 1000px;
            margin-top: 10px;
        }

        .counter-item {
            background-color: #fff;
            border: 2px solid #ccc;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .option-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .option-number {
            font-size: 1.5em;
            font-weight: bold;
            color: #007bff;
        }

        /* í•­ëª© í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ ë° ìˆ˜ì • ê°€ëŠ¥ ì„¤ì • */
        .option-text {
            font-size: 1.1em;
            color: #555;
            margin-bottom: 10px;
            min-height: 20px;
            cursor: pointer;
            word-break: break-all;
        }

        .option-text[contenteditable="true"] {
            border: 1px dashed #007bff;
            padding: 3px;
            background-color: #f8f8ff;
            outline: none;
        }

        .count-display {
            font-size: 3em;
            color: #28a745;
            font-weight: bolder;
        }
        
        /* í•­ëª© ì‚­ì œ ë²„íŠ¼ */
        .delete-btn {
            background: none;
            border: none;
            color: #dc3545;
            font-size: 1.2em;
            cursor: pointer;
            padding: 0;
        }
        .delete-btn:hover {
            color: #c82333;
        }

    </style>
</head>
<body>

    <h1>ì„¤ë¬¸ í•­ëª© í¸ì§‘ & ì‹¤ì‹œê°„ ì¹´ìš´í„°</h1>

    <div id="instructions">
        **í‚¤ë³´ë“œì˜ ìˆ«ì í‚¤**ë¥¼ ëˆŒëŸ¬ í•´ë‹¹ í•­ëª©ì˜ ì¹´ìš´íŠ¸ë¥¼ ì˜¬ë¦¬ì„¸ìš”.<br>
        **10 ì´ìƒì˜ í•­ëª©**ì€ **ìˆ«ìë¥¼ ì—°ë‹¬ì•„** ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 10ë²ˆ í•­ëª©ì€ **1** ëˆ„ë¥´ê³  ë°”ë¡œ **0** ëˆ„ë¦„).<br>
        í•­ëª© **í…ìŠ¤íŠ¸ë¥¼ í´ë¦­**í•˜ì—¬ ë‚´ìš©ì„ ë°”ë¡œ ìˆ˜ì •í•  ìˆ˜ ìˆìœ¼ë©°, **ìˆ˜ì • ë‚´ìš©ì€ ìë™ìœ¼ë¡œ ì €ì¥**ë©ë‹ˆë‹¤.
    </div>
    
    <div id="control-panel">
        <button id="add-option-btn" class="btn">â• ìƒˆ í•­ëª© ì¶”ê°€</button>
        <button id="reset-count-btn" class="btn">ğŸ”„ ì¹´ìš´íŠ¸ ì´ˆê¸°í™” (R í‚¤)</button>
    </div>

    <div id="counter-container">
        </div>

    <script>
        // ğŸ§  JavaScript ë¡œì§

        // 1. ì´ˆê¸° ìƒíƒœ ì„¤ì • ë° LocalStorage ê´€ë ¨ ìƒìˆ˜
        const STORAGE_KEY = 'surveyCounterOptions'; // LocalStorageì—ì„œ ì‚¬ìš©í•  í‚¤
        const INPUT_TIMEOUT = 500; // 500ms ë™ì•ˆ ë‹¤ìŒ ì…ë ¥ì„ ê¸°ë‹¤ë¦¼

        /**
         * ë°ì´í„°ë¥¼ LocalStorageì—ì„œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
         */
        function loadOptions() {
            try {
                const storedData = localStorage.getItem(STORAGE_KEY);
                if (storedData) {
                    // ë¬¸ìì—´ì„ JavaScript ê°ì²´ë¡œ ë³€í™˜
                    return JSON.parse(storedData);
                }
            } catch (e) {
                console.error("LocalStorage ë¡œë“œ ì‹¤íŒ¨:", e);
            }
            return null;
        }

        // ì„¤ë¬¸ í•­ëª© ë°ì´í„°: ë¡œì»¬ ì €ì¥ì†Œì—ì„œ ë¶ˆëŸ¬ì˜¤ê±°ë‚˜, ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©
        let surveyOptions = loadOptions() || [
            { text: "ë§¤ìš° ë§Œì¡±", count: 0 },
            { text: "ë§Œì¡±", count: 0 },
            { text: "ë³´í†µ", count: 0 },
            { text: "ë¶ˆë§Œì¡±", count: 0 },
            { text: "ë§¤ìš° ë¶ˆë§Œì¡±", count: 0 },
            { text: "ì¶”ê°€ í•­ëª© 6", count: 0 },
            { text: "ì¶”ê°€ í•­ëª© 7", count: 0 },
            { text: "ì¶”ê°€ í•­ëª© 8", count: 0 },
            { text: "ì¶”ê°€ í•­ëª© 9", count: 0 },
            { text: "ì¶”ê°€ í•­ëª© 10", count: 0 }
        ];

        // 2. DOM ìš”ì†Œ ì°¸ì¡°
        const counterContainer = document.getElementById('counter-container');
        const addOptionBtn = document.getElementById('add-option-btn');
        const resetCountBtn = document.getElementById('reset-count-btn');
        
        // ë©€í‹° í‚¤ ì…ë ¥ ë³€ìˆ˜
        let inputBuffer = '';     
        let inputTimer = null;    

        // --- LocalStorage í•¨ìˆ˜ ---

        /**
         * í˜„ì¬ surveyOptions ë°ì´í„°ë¥¼ LocalStorageì— ì €ì¥í•©ë‹ˆë‹¤.
         */
        function saveOptions() {
            try {
                // JavaScript ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ì €ì¥
                localStorage.setItem(STORAGE_KEY, JSON.stringify(surveyOptions));
            } catch (e) {
                console.error("LocalStorage ì €ì¥ ì‹¤íŒ¨:", e);
            }
        }

        // --- í•­ëª© ë Œë”ë§ ë° ì´ë²¤íŠ¸ ì„¤ì • ---

        /**
         * ì €ì¥ëœ surveyOptions ë°°ì—´ì„ ê¸°ë°˜ìœ¼ë¡œ HTML í•­ëª©ë“¤ì„ ìƒì„±í•˜ê³  í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.
         */
        function renderCounters() {
            counterContainer.innerHTML = ''; 

            surveyOptions.forEach((option, index) => {
                const optionIndex = index + 1; 
                
                // HTML ìš”ì†Œ ìƒì„±
                const itemDiv = document.createElement('div');
                itemDiv.className = 'counter-item';
                itemDiv.id = `item-${optionIndex}`; 

                itemDiv.innerHTML = `
                    <div class="option-header">
                        <div class="option-number">${optionIndex}</div>
                        <button class="delete-btn" data-index="${index}" title="í•­ëª© ì‚­ì œ">ğŸ—‘ï¸</button>
                    </div>
                    <div 
                        class="option-text" 
                        id="text-${optionIndex}"
                        contenteditable="true" 
                        data-index="${index}"
                    >${option.text}</div>
                    <div id="count-${optionIndex}" class="count-display">${option.count}</div>
                `;
                counterContainer.appendChild(itemDiv);
            });
            
            // í•­ëª© ë³€ê²½ì´ ìˆì—ˆìœ¼ë¯€ë¡œ ë¡œì»¬ ì €ì¥ì†Œì— ì €ì¥ (ì¹´ìš´íŠ¸ ë³€ê²½ ì™¸ì˜ êµ¬ì¡° ë³€ê²½ ì‹œ)
            saveOptions(); 
            
            // í…ìŠ¤íŠ¸ ìˆ˜ì • ë° ì‚­ì œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¬ë“±ë¡
            setupEventListeners();
        }

        /**
         * í•­ëª© ìˆ˜ì • ë° ì‚­ì œë¥¼ ìœ„í•œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
         */
        function setupEventListeners() {
            // í•­ëª© í…ìŠ¤íŠ¸ ìˆ˜ì • ì´ë²¤íŠ¸
            document.querySelectorAll('.option-text').forEach(textDiv => {
                const index = parseInt(textDiv.dataset.index);
                
                textDiv.addEventListener('blur', () => {
                    surveyOptions[index].text = textDiv.textContent.trim();
                    // í…ìŠ¤íŠ¸ê°€ ë³€ê²½ë˜ì—ˆìœ¼ë¯€ë¡œ ì €ì¥ì†Œì— ì €ì¥
                    saveOptions();
                });
                
                textDiv.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter') {
                        event.preventDefault(); 
                        textDiv.blur();
                    }
                });
            });
            
            // í•­ëª© ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸
            document.querySelectorAll('.delete-btn').forEach(deleteBtn => {
                deleteBtn.addEventListener('click', (event) => {
                    const indexToDelete = parseInt(event.currentTarget.dataset.index);
                    deleteOption(indexToDelete);
                });
            });
        }
        
        /**
         * íŠ¹ì • í•­ëª©ì˜ ì¹´ìš´íŠ¸ë¥¼ ì›¹ í˜ì´ì§€ì— ì—…ë°ì´íŠ¸í•˜ê³  ì €ì¥í•©ë‹ˆë‹¤.
         */
        function updateDisplay(index) {
            const optionIndex = index + 1; 
            const countElement = document.getElementById(`count-${optionIndex}`);
            if (countElement) {
                countElement.textContent = surveyOptions[index].count;
                // ì¹´ìš´íŠ¸ ë³€ê²½ ì‹œ ì €ì¥ì†Œì— ì €ì¥
                saveOptions();
            }
        }
        
        // 3. í•­ëª© ê´€ë¦¬ í•¨ìˆ˜
        
        function addOption() {
            surveyOptions.push({
                text: `ìƒˆ í•­ëª© ${surveyOptions.length + 1}`,
                count: 0
            });
            renderCounters(); // renderCounters ë‚´ì—ì„œ saveOptions í˜¸ì¶œë¨
        }

        function deleteOption(index) {
            if (surveyOptions.length > 1 && confirm(`'${surveyOptions[index].text}' í•­ëª©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                surveyOptions.splice(index, 1);
                renderCounters(); // renderCounters ë‚´ì—ì„œ saveOptions í˜¸ì¶œë¨
            } else if (surveyOptions.length === 1) {
                alert("ìµœì†Œ í•œ ê°œì˜ í•­ëª©ì€ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.");
            }
        }

        function resetCounts() {
            if (confirm("ëª¨ë“  ì¹´ìš´íŠ¸ë¥¼ 0ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                surveyOptions.forEach(option => {
                    option.count = 0;
                });
                renderCounters(); // renderCounters ë‚´ì—ì„œ saveOptions í˜¸ì¶œë¨
            }
        }


        // 4. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ (ë²„íŠ¼ ë° í‚¤ë³´ë“œ)
        
        // í•­ëª© ì¶”ê°€ ë²„íŠ¼
        addOptionBtn.addEventListener('click', addOption);
        
        // ì¹´ìš´íŠ¸ ì´ˆê¸°í™” ë²„íŠ¼
        resetCountBtn.addEventListener('click', resetCounts);

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ë©€í‹° í‚¤ ì…ë ¥ ì²˜ë¦¬)
        document.addEventListener('keydown', (event) => {
            const key = event.key;
            const numOptions = surveyOptions.length;

            // 'R' í‚¤ë¥¼ ëˆ„ë¥´ë©´ ì´ˆê¸°í™” ì²˜ë¦¬
            if (key === 'r' || key === 'R') {
                event.preventDefault();
                resetCounts();
                return; 
            }
            
            // ëˆŒë¦° í‚¤ê°€ ìˆ«ì '0'ë¶€í„° '9'ì¸ì§€ í™•ì¸
            if (key >= '0' && key <= '9') {
                event.preventDefault(); 
                
                // 1. ì…ë ¥ ë²„í¼ì— í‚¤ ì¶”ê°€
                inputBuffer += key;
                
                // 2. ì´ì „ íƒ€ì´ë¨¸ê°€ ìˆë‹¤ë©´ ì·¨ì†Œ
                if (inputTimer) {
                    clearTimeout(inputTimer);
                }
                
                // 3. ìƒˆ íƒ€ì´ë¨¸ ì„¤ì • (0.5ì´ˆ ëŒ€ê¸°)
                inputTimer = setTimeout(() => {
                    // íƒ€ì´ë¨¸ê°€ ë§Œë£Œë˜ë©´ ìµœì¢… ì…ë ¥ ì²˜ë¦¬
                    const itemNumber = parseInt(inputBuffer, 10); // ìˆ«ìë¡œ ë³€í™˜
                    
                    // ìœ íš¨ì„± ê²€ì‚¬: í•­ëª© ë²ˆí˜¸ê°€ 1 ì´ìƒì´ê³  í˜„ì¬ í•­ëª© ê°œìˆ˜ ì´í•˜ì¸ì§€ í™•ì¸
                    if (itemNumber >= 1 && itemNumber <= numOptions) {
                        const index = itemNumber - 1; // ë°°ì—´ ì¸ë±ìŠ¤ (0ë¶€í„° ì‹œì‘)
                        
                        // ì¹´ìš´íŠ¸ ì¦ê°€
                        surveyOptions[index].count++;

                        // í™”ë©´ ì—…ë°ì´íŠ¸ ë° ì €ì¥
                        updateDisplay(index); 
                    } 
                    
                    // 4. ì…ë ¥ ë²„í¼ ì´ˆê¸°í™”
                    inputBuffer = '';
                    inputTimer = null;
                    
                }, INPUT_TIMEOUT); 
            }
            // ë‹¤ë¥¸ í‚¤ëŠ” ë¬´ì‹œ
        });

        // ì•± ë¡œë“œ ì‹œ ì´ˆê¸° í™”ë©´ ë Œë”ë§ (ì €ì¥ëœ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° í¬í•¨)
        renderCounters();
    </script>

</body>
</html>